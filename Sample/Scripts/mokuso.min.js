(function(){var u="mokuso",i={},n=u+"View",o=function(t,i,r){t.model.preinit(i,r);var u=i.closest("*[data-"+n+"]");u.length?u.data(n).showIn(t,i):t.render(i)},f=function(n){return $.ajax({url:require.toUrl("view/"+n+".html")}).promise()},r=function(t,u,e){var a,l,v,w;if($.type(u)=="string"&&!($.trim(u).length<=0)&&$.type(t)=="object"){var h=$.Deferred(),y=u.indexOf("?"),c=y>0?u.substring(0,y):u,p=kendo.isObservableObject(e)?e:new kendo.data.ObservableObject($.isPlainObject(e)?e:{}),s=t;return t instanceof $||(s=$(t)),a=s.find("[data-attr-"+n+"]"),s.data(n)&&a.push(s),l=null,a.length?(v=$.Deferred(),l=$.Deferred(),w=$.map(a,function(n){var t=$(n);return{depth:t.parents().length,node:t}}).sort(function(n,t){return t.depth-n.depth}).reduce(function(t,i){return t.then(function(){return i.node.data(n).model.deinit(i.node)})},v),w.always(function(){s.data(n).destroy();s.empty()}).always(function(){return $(i).trigger("before-route",[c,s]),f(c).always(function(n){l.resolveWith(null,[n])})}),v.resolve()):($(i).trigger("before-route",[c,s]),l=f(c)),require(["viewmodel/"+c],function(t){l.then(function(i){var u=new kendo.Layout("<div>"+i+"<\/div>",{model:kendo.observable($.extend(!0,{preinit:function(){},init:function(){},deinit:function(){}},t)),init:function(){var n=this;$.when(this.model.init(this.element,p)).always(function(){var _model=n.model,i=n.element,t=[];i.find("*[data-page]").each(function(n,i){var _n=$(i),_args=new kendo.data.ObservableObject({}),arrBindFields,__args,fProp,tProp;if($.trim(_n.attr("data-page-args")).length)with(_model){arrBindFields=[];__args={};try{eval("__args = "+_n.attr("data-page-args"))}catch(u){console.error("Argument Parsing Error","Could not parse inline page arguments: "+_n.attr("data-page-args"))}for(fProp in __args)for(tProp in _model)if(__args[fProp]===_model[tProp]){arrBindFields.push({f:fProp,t:tProp});_args.set(fProp,_model.get(tProp));break}arrBindFields.length&&_model.bind("change",function(n){for(var x=0;x<arrBindFields.length;x++)if(arrBindFields[x].t==n.field){_args.set(arrBindFields[x].t,this.get(n.field));break}})}t.push(r(_n,_n.attr("data-page"),_args))});$.when.apply($,t).then(function(){h.resolve()}).fail(function(){h.rejectWith(null,arguments)})})},wrap:!1});o(u,s,p);s.attr("data-attr-"+n,!0);s.data(n,u)}).fail(function(){h.rejectWith(null,arguments)})},function(){h.rejectWith(null,arguments)}),h.fail(function(){console.error("Page load failed: ",arguments)}).always(function(){$(i).trigger("after-route",[c,s])}),h}},t=null,e;kendo.isArray=function(n){return n&&$.isArray(n)?!0:n&&kendo.isFunction(n.shift)&&kendo.isFunction(n.slice)?!0:!1};kendo.isObservableObject=function(n){return n&&$.type(n.uid)=="string"&&kendo.isFunction(n.get)&&kendo.isFunction(n.set)?!0:!1};e=kendo.Class.extend({events:["before-route","after-route"],init:function(){},initialize:function(n,i){if($.type(n)=="object"){t=new kendo.Router({pushState:!1,root:i});t.route("/*page",function(t,i){r(n,t,i)});t.start();var u=location.href.indexOf("#");$.trim(i).length&&(u<0||u==location.href.length-1)&&this.route(i)}else console.error("Could not initialize app, invalid content node!")},route:function(n,i){if(!t){console.error("App not initialized: call initialize(DomNode contentNode, String startPage)");return}$.type(n)=="string"&&$.trim(n).length>0?t.navigate("/"+n,i):console.error("Arguments Exception","Page is empty; Usage: route(String page)")},load:function(n,t,i){if($.type(t)=="string"&&$.trim(t).length>0&&$.type(n)=="object")return t.substring(0,1)=="/"&&(t=t.substring(1,t.length)),r(n,t,i);console.error("Arguments Exception","Page is empty or node is not a DOM element; Usage: load(String page, DomNode node)")},bind:function(n,t){$.type(n)=="string"&&$.trim(n).length>0&&$.isFunction(t)?$(i).bind(n,t):console.error("Arguments Exception","Event is empty or method is not a function; Usage: bind(String event, Function method)")}});window[u]=new e})();